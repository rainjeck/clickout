{"version":3,"sources":["clickOut.js"],"names":["clickOut","params","className","activeClass","closestPolifill","matchesPolifill","body","document","querySelector","addEventListener","e","eventTarget","target","parent","closest","elems","querySelectorAll","activeElements","forEach","call","elem","classList","contains","remove","push","after","Element","prototype","css","node","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":";;;;;;;;;;;;;AAAA;;;;;AAKA;;;;;;;;;;;;;MAEqBA,Q;;;AACnB,sBAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAElBA,MAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,WAAKC,SAAL,GAAiBD,MAAM,CAACC,SAAP,IAAoB,cAArC;AACA,WAAKC,WAAL,GAAmBF,MAAM,CAACE,WAAP,IAAsB,WAAzC;AAEA,WAAKC,eAAL;AACA,WAAKC,eAAL;AAEA,UAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;AAEAF,MAAAA,IAAI,CAACG,gBAAL,CAAsB,OAAtB,EAA+B,UAACC,CAAD,EAAO;AAEpC,YAAMC,WAAW,GAAGD,CAAC,CAACE,MAAtB;AACA,YAAMC,MAAM,GAAGF,WAAW,CAACG,OAAZ,CAAoB,KAAI,CAACZ,SAAzB,CAAf;;AAEA,YAAKW,MAAM,KAAK,IAAhB,EAAuB;AACrB,cAAME,KAAK,GAAGR,QAAQ,CAACS,gBAAT,CAA0B,KAAI,CAACd,SAA/B,CAAd;AAEA,cAAMC,WAAW,GAAG,KAAI,CAACA,WAAzB;AAEA,cAAIc,cAAc,GAAG,EAArB;AAEA,aAAGC,OAAH,CAAWC,IAAX,CAAgBJ,KAAhB,EAAuB,UAASK,IAAT,EAAc;AACnC,gBAAKA,IAAI,CAACC,SAAL,CAAeC,QAAf,CAAwBnB,WAAxB,CAAL,EAA4C;AAC1CiB,cAAAA,IAAI,CAACC,SAAL,CAAeE,MAAf,CAAsBpB,WAAtB;AACAc,cAAAA,cAAc,CAACO,IAAf,CAAoBJ,IAApB;AACD;AACF,WALD,EAPqB,CAcrB;;AACA,cAAInB,MAAM,CAACwB,KAAP,IAAgB,OAAOxB,MAAM,CAACwB,KAAd,KAAwB,UAA5C,EAAyD;AACvDxB,YAAAA,MAAM,CAACwB,KAAP,CAAcR,cAAd;AACD;AACF;AACF,OAxBD;AAyBD;;;;wCAEiB;AAChB,YAAI,CAACS,OAAO,CAACC,SAAR,CAAkBb,OAAvB,EAAgC;AAC9BY,UAAAA,OAAO,CAACC,SAAR,CAAkBb,OAAlB,GAA4B,UAASc,GAAT,EAAc;AACxC,gBAAIC,IAAI,GAAG,IAAX;;AACA,mBAAOA,IAAP,EAAa;AACX,kBAAIA,IAAI,CAACC,OAAL,CAAaF,GAAb,CAAJ,EAAuB,OAAOC,IAAP,CAAvB,KACKA,IAAI,GAAGA,IAAI,CAACE,aAAZ;AACN;;AACD,mBAAO,IAAP;AACD,WAPD;AAQD;AACF;;;wCAEiB;AAChB,YAAI,CAACL,OAAO,CAACC,SAAR,CAAkBG,OAAvB,EAAgC;AAC9BJ,UAAAA,OAAO,CAACC,SAAR,CAAkBG,OAAlB,GAA4BJ,OAAO,CAACC,SAAR,CAAkBK,eAAlB,IAC1BN,OAAO,CAACC,SAAR,CAAkBM,qBADQ,IAE1BP,OAAO,CAACC,SAAR,CAAkBO,kBAFQ,IAG1BR,OAAO,CAACC,SAAR,CAAkBQ,iBAHpB;AAID;AACF","sourcesContent":["/**\r\n * Author and copyright: Tishuk Nadezda (https://github.com/rainjeck)\r\n * Repository: https://github.com/rainjeck/clickout\r\n * License: MIT, see file 'LICENSE'\r\n */\r\n'use strict';\r\n\r\nexport default class clickOut {\r\n  constructor(params) {\r\n\r\n    params = params || {};\r\n\r\n    this.className = params.className || '.js-clickout';\r\n    this.activeClass = params.activeClass || 'is-active';\r\n\r\n    this.closestPolifill();\r\n    this.matchesPolifill();\r\n\r\n    const body = document.querySelector('body');\r\n\r\n    body.addEventListener(\"click\", (e) => {\r\n\r\n      const eventTarget = e.target;\r\n      const parent = eventTarget.closest(this.className);\r\n\r\n      if ( parent === null ) {\r\n        const elems = document.querySelectorAll(this.className);\r\n\r\n        const activeClass = this.activeClass;\r\n\r\n        let activeElements = [];\r\n\r\n        [].forEach.call(elems, function(elem){\r\n          if ( elem.classList.contains(activeClass) ) {\r\n            elem.classList.remove(activeClass);\r\n            activeElements.push(elem);\r\n          }\r\n        });\r\n\r\n        // callback\r\n        if (params.after && typeof params.after === \"function\" ) {\r\n          params.after( activeElements );\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  closestPolifill() {\r\n    if (!Element.prototype.closest) {\r\n      Element.prototype.closest = function(css) {\r\n        var node = this;\r\n        while (node) {\r\n          if (node.matches(css)) return node;\r\n          else node = node.parentElement;\r\n        }\r\n        return null;\r\n      };\r\n    }\r\n  }\r\n\r\n  matchesPolifill() {\r\n    if (!Element.prototype.matches) {\r\n      Element.prototype.matches = Element.prototype.matchesSelector ||\r\n        Element.prototype.webkitMatchesSelector ||\r\n        Element.prototype.mozMatchesSelector ||\r\n        Element.prototype.msMatchesSelector;\r\n    }\r\n  }\r\n}\r\n"],"file":"../src/clickout.js"}